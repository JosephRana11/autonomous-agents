"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const network_1 = require("./network");
const protocol_1 = require("./protocol");
const StaticFileBlockchain_1 = require("./StaticFileBlockchain");
network_1.NodePeer.listen('172.31.1.69', 3001, peer => {
    const handshakeChannel = peer.createProtocolChannel(0);
    protocol_1.HandShake.accept(handshakeChannel, (success) => {
        if (success) {
            const txSubmissionChannel = peer.createProtocolChannel(4);
            protocol_1.TxSubmission.listen(txSubmissionChannel);
            const keepAliveChannel = peer.createProtocolChannel(8);
            protocol_1.KeepAlive.listen(keepAliveChannel);
            const chainSyncChannel = peer.createProtocolChannel(2);
            protocol_1.ChainSync.listen(chainSyncChannel, new StaticFileBlockchain_1.StaticFileBlockchain("./client-blockchain.json"));
        }
    });
});
//# sourceMappingURL=server.js.map